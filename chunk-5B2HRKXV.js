import{e as j,i as D}from"./chunk-HIV4IRLT.js";import{$a as E,Fa as M,Gb as R,Ib as V,Oa as g,P as C,Pa as h,Ra as k,Sa as _,Ta as v,U as m,V as c,W as S,X as y,Ya as i,Za as l,_a as f,ab as N,bb as p,cb as s,fa as b,hb as I,ib as d,jb as w,kb as u,nb as L,ob as P,qb as U,sa as T,ta as a}from"./chunk-WPFCP6T7.js";var A=()=>[0,1,2,3],B=()=>[1,2,3,4,5,6,7,8,9],H=(r,n)=>n.id;function F(r,n){if(r&1&&(i(0,"div",6),d(1),l()),r&2){let e=s();a(),u(" ",e.errorMessage()," ")}}function $(r,n){if(r&1){let e=E();i(0,"button",13),p("click",function(){let o=m(e).$implicit,x=s(2);return c(x.selectUser(o))}),i(1,"div",14),d(2),l(),i(3,"div",15),d(4),l(),i(5,"div",16)(6,"div",17),d(7),l(),i(8,"div",18),d(9),l()()()}if(r&2){let e=n.$implicit,t=n.$index;a(2),u(" ",t+1," "),a(2),u(" ",e.name.charAt(0)," "),a(3),w(e.name),a(2),w(e.role)}}function G(r,n){if(r&1&&(i(0,"div",8)(1,"h2",10),d(2," \xBFQui\xE9n eres? "),l(),i(3,"div",11),_(4,$,10,4,"button",12,H),l()()),r&2){let e=s();a(4),v(e.users)}}function K(r,n){if(r&1&&f(0,"div",37),r&2){let e=n.$implicit,t=s(2);I("bg-emerald-500",t.pin().length>e)("border-emerald-500",t.pin().length>e)("border-slate-300",t.pin().length<=e)("scale-110",t.pin().length>e)}}function z(r,n){if(r&1){let e=E();i(0,"button",38),p("click",function(){let o=m(e).$implicit,x=s(2);return c(x.appendPin(o))}),d(1),l()}if(r&2){let e=n.$implicit;a(),u(" ",e," ")}}function J(r,n){if(r&1){let e=E();i(0,"div",9)(1,"button",19),p("click",function(){m(e);let o=s();return c(o.resetToUserSelection())}),S(),i(2,"svg",20),f(3,"path",21),l()(),y(),i(4,"div",22)(5,"div",23)(6,"div",24),d(7),l()(),i(8,"h2",25),d(9),l(),i(10,"p",26),d(11,"Ingrese PIN"),l(),i(12,"div",27),_(13,K,1,8,"div",28,k),l()(),i(15,"div",29)(16,"div",30),_(17,z,2,1,"button",31,k),i(19,"button",32),p("click",function(){m(e);let o=s();return c(o.pin.set(""))}),S(),i(20,"svg",33),f(21,"path",34),l()(),y(),i(22,"button",35),p("click",function(){m(e);let o=s();return c(o.appendPin(0))}),d(23,"0"),l(),i(24,"button",36),p("click",function(){m(e);let o=s();return c(o.submitLogin())}),d(25," OK "),l()()()()}if(r&2){let e,t,o=s();a(7),u(" ",(e=o.selectedUser())==null||e.name==null?null:e.name.charAt(0)," "),a(2),w((t=o.selectedUser())==null?null:t.name),a(4),v(L(2,A)),a(4),v(L(3,B))}}var O=class r{authService=C(D);router=C(j);MAX_PIN_LENGTH=4;currentStep=b("SELECT_USER");selectedUser=b(null);pin=b("");errorMessage=b("");currentDate=new Date;users=[{id:1,name:"Jenny (Admin)",pin:"1234",role:"ADMIN"},{id:2,name:"Juan (Caja)",pin:"0000",role:"OPERATOR"},{id:3,name:"Pedro (Carnic)",pin:"1111",role:"OPERATOR"}];selectUser(n){this.selectedUser.set(n),this.currentStep.set("ENTER_PIN"),this.pin.set(""),this.errorMessage.set("")}resetToUserSelection(){this.currentStep.set("SELECT_USER"),this.selectedUser.set(null),this.pin.set(""),this.errorMessage.set("")}appendPin(n){this.pin().length<this.MAX_PIN_LENGTH&&(this.pin.update(e=>e+n.toString()),this.errorMessage.set(""))}submitLogin(){let n=this.selectedUser(),e=this.pin();n&&(n.pin===e?(this.authService.currentUser.set(n),this.router.navigate(["/pos"])):(this.errorMessage.set("PIN INCORRECTO"),this.pin.set(""),setTimeout(()=>this.errorMessage.set(""),2e3)))}handleKeyboard(n){let e=n.key,t=!isNaN(Number(e));if(e==="Escape"){this.currentStep()==="ENTER_PIN"&&this.resetToUserSelection();return}if(this.currentStep()==="SELECT_USER"){if(t){let o=Number(e)-1;o>=0&&o<this.users.length&&this.selectUser(this.users[o])}}else this.currentStep()==="ENTER_PIN"&&(t?this.appendPin(Number(e)):e==="Backspace"?this.pin.update(o=>o.slice(0,-1)):e==="Enter"&&this.submitLogin())}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=M({type:r,selectors:[["app-login"]],hostBindings:function(e,t){e&1&&N("keydown",function(x){return t.handleKeyboard(x)},T)},decls:13,vars:7,consts:[[1,"h-[100dvh]","w-full","bg-slate-950","flex","items-center","justify-center","p-2","md:p-4","overflow-hidden"],[1,"bg-white","rounded-2xl","shadow-2xl","overflow-hidden","w-full","max-w-5xl","max-h-[95dvh]","h-auto","flex","flex-col","relative","border-t-4","border-emerald-500"],[1,"bg-slate-50","p-3","landscape:py-2","border-b","border-gray-200","flex","justify-between","items-center","shrink-0"],[1,"text-lg","md:text-xl","font-bold","text-slate-700","tracking-wide","flex","items-center","gap-2"],[1,"w-3","h-3","bg-emerald-500","rounded-full","animate-pulse"],[1,"text-xs","md:text-sm","font-mono","font-bold","text-emerald-600","bg-emerald-100","px-2","py-1","rounded"],[1,"bg-red-500","text-white","text-center","py-1","text-sm","font-bold","animate-pulse","absolute","top-12","left-0","w-full","z-50","shadow-md"],[1,"flex-1","overflow-hidden","relative","flex","flex-col"],[1,"flex-1","overflow-y-auto","p-4","md:p-8","animate-fade-in","custom-scrollbar"],[1,"flex-1","flex","flex-col","landscape:flex-row","h-full","animate-fade-in","bg-slate-50"],[1,"text-lg","md:text-xl","font-light","text-slate-600","mb-4","text-center","uppercase","tracking-widest","sticky","top-0","bg-white/95","backdrop-blur","z-10","py-2"],[1,"grid","grid-cols-2","md:grid-cols-3","landscape:grid-cols-4","gap-3","md:gap-4","max-w-4xl","mx-auto","pb-4"],[1,"group","relative","bg-white","border-2","border-slate-100","hover:border-emerald-400","hover:shadow-lg","hover:shadow-emerald-100/50","rounded-xl","p-3","transition-all","duration-200","active:scale-95","flex","flex-col","items-center","justify-center","min-h-[110px]"],[1,"group","relative","bg-white","border-2","border-slate-100","hover:border-emerald-400","hover:shadow-lg","hover:shadow-emerald-100/50","rounded-xl","p-3","transition-all","duration-200","active:scale-95","flex","flex-col","items-center","justify-center","min-h-[110px]",3,"click"],[1,"absolute","top-2","left-2","w-6","h-6","bg-slate-200","text-slate-600","rounded","flex","items-center","justify-center","font-bold","font-mono","text-xs","group-hover:bg-emerald-500","group-hover:text-white","transition-colors"],[1,"w-14","h-14","rounded-full","bg-slate-50","mb-2","flex","items-center","justify-center","text-xl","text-slate-400","font-bold","group-hover:bg-emerald-50","group-hover:text-emerald-600","transition-colors","border-2","border-transparent","group-hover:border-emerald-200"],[1,"text-center","w-full","truncate","px-1"],[1,"font-bold","text-sm","text-slate-700","group-hover:text-emerald-700","truncate"],[1,"text-[10px]","text-slate-400","uppercase","font-semibold"],[1,"absolute","top-4","left-4","z-20","text-slate-400","hover:text-emerald-600","transition-colors","p-2","bg-white","rounded-full","shadow-sm","border","border-slate-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"],[1,"flex-1","flex","flex-col","items-center","justify-center","p-4","landscape:border-r","border-slate-200","bg-white","landscape:w-1/2"],[1,"relative","mb-4"],[1,"w-20","h-20","bg-emerald-100","text-emerald-600","rounded-full","flex","items-center","justify-center","text-3xl","font-bold","shadow-inner","border-4","border-white","ring-2","ring-emerald-500"],[1,"text-xl","font-bold","text-slate-800"],[1,"text-slate-400","text-xs","uppercase","font-bold","tracking-widest","mb-6"],[1,"flex","gap-4","h-4","mb-2"],[1,"w-4","h-4","rounded-full","border-2","transition-all","duration-300",3,"bg-emerald-500","border-emerald-500","border-slate-300","scale-110"],[1,"flex-1","flex","items-center","justify-center","p-2","bg-slate-50","landscape:w-1/2"],[1,"grid","grid-cols-3","gap-2","w-full","max-w-[260px]","h-full","max-h-[300px]"],[1,"bg-white","border-b-2","border-slate-200","rounded-lg","text-xl","font-bold","text-slate-600","hover:bg-emerald-50","hover:text-emerald-700","hover:border-emerald-200","active:border-b-0","active:translate-y-0.5","transition-all","shadow-sm"],[1,"bg-red-50","border-b-2","border-red-100","rounded-lg","text-red-500","font-bold","hover:bg-red-100","active:border-b-0","active:translate-y-0.5","transition-all","flex","items-center","justify-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M12 9.75 14.25 12m0 0 2.25 2.25M14.25 12l2.25-2.25M14.25 12l-2.25 2.25m-2.25-2.25-2.25 2.25m0 0-2.25-2.25m2.25 2.25L9.75 9.75M9.75 12l-2.25 2.25M9.75 12l2.25-2.25M9.75 12l-2.25 2.25m-2.25-2.25-2.25 2.25"],[1,"bg-white","border-b-2","border-slate-200","rounded-lg","text-xl","font-bold","text-slate-600","hover:bg-emerald-50","hover:text-emerald-700","active:border-b-0","active:translate-y-0.5","transition-all","shadow-sm",3,"click"],[1,"bg-emerald-500","border-b-2","border-emerald-700","rounded-lg","text-white","font-bold","hover:bg-emerald-400","active:border-b-0","active:translate-y-0.5","transition-all","shadow-md","shadow-emerald-200",3,"click"],[1,"w-4","h-4","rounded-full","border-2","transition-all","duration-300"],[1,"bg-white","border-b-2","border-slate-200","rounded-lg","text-xl","font-bold","text-slate-600","hover:bg-emerald-50","hover:text-emerald-700","hover:border-emerald-200","active:border-b-0","active:translate-y-0.5","transition-all","shadow-sm",3,"click"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),f(4,"div",4),d(5," SANTI POS "),l(),i(6,"div",5),d(7),P(8,"date"),l()(),g(9,F,2,1,"div",6),i(10,"div",7),g(11,G,6,0,"div",8),g(12,J,26,4,"div",9),l()()()),e&2&&(a(7),u(" ",U(8,4,t.currentDate,"HH:mm")," "),a(2),h(t.errorMessage()?9:-1),a(2),h(t.currentStep()==="SELECT_USER"?11:-1),a(),h(t.currentStep()==="ENTER_PIN"&&t.selectedUser()?12:-1))},dependencies:[V,R],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease-out forwards}"]})};export{O as LoginComponent};
