import{e as R,g as V}from"./chunk-CSAJKEIS.js";import{Ab as M,Ca as L,Ka as b,La as _,N as v,Na as C,Oa as f,Pa as E,S as m,T as u,Ua as i,Va as l,Wa as T,Xa as h,Ya as k,Za as p,_a as d,da as g,db as N,eb as s,fb as w,gb as c,ib as S,jb as U,lb as I,qa as y,ra as a,yb as P}from"./chunk-YGIJZFWA.js";var O=()=>[0,1,2,3],j=()=>[1,2,3,4,5,6,7,8,9],A=(o,t)=>t.id;function F(o,t){if(o&1&&(i(0,"div",6),s(1),l()),o&2){let e=d();a(),c(" ",e.errorMessage()," ")}}function $(o,t){if(o&1){let e=h();i(0,"button",13),p("click",function(){let r=m(e).$implicit,x=d(2);return u(x.selectUser(r))}),i(1,"div",14),s(2),l(),i(3,"div",15),s(4),l(),i(5,"div",16)(6,"div",17),s(7),l(),i(8,"div",18),s(9),l()()()}if(o&2){let e=t.$implicit,n=t.$index;a(2),c(" ",n+1," "),a(2),c(" ",e.name.charAt(0)," "),a(3),w(e.name),a(2),w(e.role)}}function B(o,t){if(o&1&&(i(0,"div",7)(1,"h2",9),s(2," Seleccione Operador (Ingrese #) "),l(),i(3,"div",10),f(4,$,10,4,"button",11,A),l(),i(6,"p",12),s(7,"Use el teclado num\xE9rico o toque la pantalla"),l()()),o&2){let e=d();a(4),E(e.users)}}function H(o,t){if(o&1&&T(0,"div",31),o&2){let e=t.$implicit,n=d(2);N("bg-blue-600",n.pin().length>e)("border-blue-600",n.pin().length>e)}}function K(o,t){if(o&1){let e=h();i(0,"button",32),p("click",function(){let r=m(e).$implicit,x=d(2);return u(x.appendPin(r))}),s(1),l()}if(o&2){let e=t.$implicit;a(),c(" ",e," ")}}function J(o,t){if(o&1){let e=h();i(0,"div",8)(1,"button",19),p("click",function(){m(e);let r=d();return u(r.resetToUserSelection())}),i(2,"span"),s(3,"\u2190 Volver"),l()(),i(4,"div",20)(5,"div",21),s(6),l(),i(7,"h2",22),s(8),l(),i(9,"p",23),s(10,"Ingrese su clave de acceso"),l()(),i(11,"div",24),f(12,H,1,4,"div",25,C),l(),i(14,"div",26),f(15,K,2,1,"button",27,C),i(17,"button",28),p("click",function(){m(e);let r=d();return u(r.pin.set(""))}),s(18,"CLR"),l(),i(19,"button",29),p("click",function(){m(e);let r=d();return u(r.appendPin(0))}),s(20,"0"),l(),i(21,"button",30),p("click",function(){m(e);let r=d();return u(r.submitLogin())}),s(22,"OK"),l()()()}if(o&2){let e,n,r=d();a(6),c(" ",(e=r.selectedUser())==null||e.name==null?null:e.name.charAt(0)," "),a(2),c("Hola, ",(n=r.selectedUser())==null?null:n.name),a(4),E(S(2,O)),a(3),E(S(3,j))}}var D=class o{authService=v(V);router=v(R);currentStep=g("SELECT_USER");selectedUser=g(null);pin=g("");errorMessage=g("");currentDate=new Date;users=[{id:1,name:"Jenny (Admin)",pin:"1234",role:"ADMIN"},{id:2,name:"Juan (Caja)",pin:"0000",role:"OPERATOR"},{id:3,name:"Pedro (Carnic)",pin:"1111",role:"OPERATOR"}];selectUser(t){this.selectedUser.set(t),this.currentStep.set("ENTER_PIN"),this.pin.set(""),this.errorMessage.set("")}resetToUserSelection(){this.currentStep.set("SELECT_USER"),this.selectedUser.set(null),this.pin.set(""),this.errorMessage.set("")}appendPin(t){this.pin().length<6&&(this.pin.update(e=>e+t.toString()),this.errorMessage.set(""))}submitLogin(){let t=this.selectedUser(),e=this.pin();t&&(t.pin===e?(this.authService.currentUser.set(t),this.router.navigate(["/pos"])):(this.errorMessage.set("PIN INCORRECTO"),this.pin.set(""),setTimeout(()=>this.errorMessage.set(""),2e3)))}handleKeyboard(t){let e=t.key,n=!isNaN(Number(e));if(e==="Escape"){this.currentStep()==="ENTER_PIN"&&this.resetToUserSelection();return}if(this.currentStep()==="SELECT_USER"){if(n){let r=Number(e)-1;r>=0&&r<this.users.length&&this.selectUser(this.users[r])}}else this.currentStep()==="ENTER_PIN"&&(n?this.appendPin(Number(e)):e==="Backspace"?this.pin.update(r=>r.slice(0,-1)):e==="Enter"&&this.submitLogin())}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=L({type:o,selectors:[["app-login"]],hostBindings:function(e,n){e&1&&k("keydown",function(x){return n.handleKeyboard(x)},y)},decls:13,vars:7,consts:[[1,"min-h-screen","bg-slate-900","flex","items-center","justify-center","p-6"],[1,"bg-white","rounded-2xl","shadow-2xl","overflow-hidden","w-full","max-w-4xl","min-h-[500px]","flex","flex-col","relative"],[1,"bg-slate-100","p-4","border-b","border-gray-200","flex","justify-between","items-center"],[1,"text-xl","font-bold","text-slate-700","tracking-wide"],[1,"text-blue-600"],[1,"text-sm","font-mono","text-gray-500"],[1,"bg-red-500","text-white","text-center","py-2","font-bold","animate-pulse","absolute","top-14","left-0","w-full","z-50"],[1,"p-8","flex-1","flex","flex-col","items-center","justify-center","animate-fade-in"],[1,"p-8","flex-1","flex","flex-col","items-center","justify-center","bg-slate-50","animate-fade-in"],[1,"text-2xl","font-light","text-slate-800","mb-8","uppercase","tracking-widest"],[1,"grid","grid-cols-2","md:grid-cols-3","gap-6","w-full","max-w-3xl"],[1,"group","relative","bg-white","border-2","border-slate-200","hover:border-blue-500","hover:shadow-xl","rounded-xl","p-6","transition-all","duration-200","active:scale-95","flex","flex-col","items-center"],[1,"mt-10","text-gray-400","text-sm"],[1,"group","relative","bg-white","border-2","border-slate-200","hover:border-blue-500","hover:shadow-xl","rounded-xl","p-6","transition-all","duration-200","active:scale-95","flex","flex-col","items-center",3,"click"],[1,"absolute","top-3","left-3","w-8","h-8","bg-slate-800","text-white","rounded","flex","items-center","justify-center","font-bold","font-mono","text-lg","shadow-sm","group-hover:bg-blue-600","transition-colors"],[1,"w-20","h-20","rounded-full","bg-slate-100","mb-4","flex","items-center","justify-center","text-3xl","text-slate-400","font-bold","group-hover:bg-blue-50","group-hover:text-blue-600","transition-colors"],[1,"text-center"],[1,"font-bold","text-lg","text-slate-800","group-hover:text-blue-700"],[1,"text-xs","text-slate-500","uppercase","mt-1"],[1,"absolute","top-20","left-6","text-slate-500","hover:text-slate-800","font-bold","flex","items-center","gap-2",3,"click"],[1,"text-center","mb-8"],[1,"w-16","h-16","bg-blue-600","text-white","rounded-full","flex","items-center","justify-center","text-2xl","font-bold","mx-auto","mb-2","shadow-lg"],[1,"text-xl","font-bold","text-slate-800"],[1,"text-slate-500","text-sm"],[1,"flex","gap-3","mb-8","h-8"],[1,"w-4","h-4","rounded-full","border-2","border-slate-400","transition-all",3,"bg-blue-600","border-blue-600"],[1,"grid","grid-cols-3","gap-3","w-64"],[1,"h-14","bg-white","border","border-gray-200","rounded","shadow-sm","text-xl","font-bold","hover:bg-gray-50","active:bg-blue-100","transition-colors"],[1,"h-14","bg-red-50","border","border-red-100","rounded","text-red-600","font-bold","hover:bg-red-100",3,"click"],[1,"h-14","bg-white","border","border-gray-200","rounded","shadow-sm","text-xl","font-bold","hover:bg-gray-50",3,"click"],[1,"h-14","bg-blue-600","text-white","rounded","shadow-md","font-bold","hover:bg-blue-700",3,"click"],[1,"w-4","h-4","rounded-full","border-2","border-slate-400","transition-all"],[1,"h-14","bg-white","border","border-gray-200","rounded","shadow-sm","text-xl","font-bold","hover:bg-gray-50","active:bg-blue-100","transition-colors",3,"click"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4," SANTI POS "),i(5,"span",4),s(6,"v1.0"),l()(),i(7,"div",5),s(8),U(9,"date"),l()(),b(10,F,2,1,"div",6),b(11,B,8,0,"div",7),b(12,J,23,4,"div",8),l()()),e&2&&(a(8),c(" ",I(9,4,n.currentDate,"HH:mm")," "),a(2),_(n.errorMessage()?10:-1),a(),_(n.currentStep()==="SELECT_USER"?11:-1),a(),_(n.currentStep()==="ENTER_PIN"&&n.selectedUser()?12:-1))},dependencies:[M,P],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease-out forwards}"]})};export{D as LoginComponent};
